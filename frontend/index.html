<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academic Question Generator</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>üìö Academic Question Generator</h1>
            <p>Generate Bloom's Taxonomy-compliant examination questions</p>
            <nav>
                <a href="index.html" class="nav-link active">Generate Questions</a>
                <a href="dashboard.html" class="nav-link">Dashboard</a>
            </nav>
        </header>

        <main>
            <!-- Question Generation Form -->
            <section class="card">
                <h2>Generate New Question</h2>

                <div class="tabs">
                    <button class="tab-btn active" onclick="switchTab('standard')">Standard Mode</button>
                    <button class="tab-btn" onclick="switchTab('context')">Files & Notes Mode</button>
                    <button class="tab-btn" onclick="switchTab('manual')">Manual Input Mode</button>
                </div>

                <!-- Standard Form -->
                <div id="standardMode" class="tab-content active">
                    <form id="questionForm">
                        <div class="form-group">
                            <label for="subject">Subject *</label>
                            <select id="subject" required>
                                <option value="">Loading subjects...</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="topic">Topic *</label>
                            <select id="topic" required disabled>
                                <option value="">Select a subject first</option>
                            </select>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="bloomLevel">Bloom's Level *</label>
                                <select id="bloomLevel" required>
                                    <option value="">Select Level</option>
                                    <option value="RBT1">RBT1 - Remember</option>
                                    <option value="RBT2">RBT2 - Understand</option>
                                    <option value="RBT3">RBT3 - Apply</option>
                                    <option value="RBT4">RBT4 - Analyze</option>
                                    <option value="RBT5">RBT5 - Evaluate</option>
                                    <option value="RBT6">RBT6 - Create</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="difficulty">Difficulty *</label>
                                <select id="difficulty" required>
                                    <option value="">Select Difficulty</option>
                                    <option value="EASY">Easy</option>
                                    <option value="MEDIUM">Medium</option>
                                    <option value="HARD">Hard</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="marks">Marks *</label>
                                <input type="number" id="marks" required min="1" max="100" placeholder="15">
                            </div>
                        </div>

                        <button type="submit" class="btn-primary" id="generateBtn">
                            <span class="btn-text">Generate Question</span>
                            <span class="loader" style="display: none;"></span>
                        </button>
                    </form>
                </div>

                <!-- Context Form -->
                <div id="contextMode" class="tab-content">
                    <form id="pdfForm">
                        <div class="form-group">
                            <label for="pdfFile">Upload PDF Notes/Chapter *</label>
                            <input type="file" id="pdfFile" accept=".pdf" required>
                            <small style="color: var(--text-muted);">Upload a PDF containing the study material or
                                chapter content.</small>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="pdfSubject">Subject *</label>
                                <select id="pdfSubject" required>
                                    <option value="">Loading subjects...</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="pdfTopic">Topic *</label>
                                <select id="pdfTopic" required disabled>
                                    <option value="">Select a subject first</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="pdfBloomLevel">Bloom's Level *</label>
                                <select id="pdfBloomLevel" required>
                                    <option value="">Select Level</option>
                                    <option value="RBT1">RBT1 - Remember</option>
                                    <option value="RBT2">RBT2 - Understand</option>
                                    <option value="RBT3">RBT3 - Apply</option>
                                    <option value="RBT4">RBT4 - Analyze</option>
                                    <option value="RBT5">RBT5 - Evaluate</option>
                                    <option value="RBT6">RBT6 - Create</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="pdfDifficulty">Difficulty *</label>
                                <select id="pdfDifficulty" required>
                                    <option value="">Select Difficulty</option>
                                    <option value="EASY">Easy</option>
                                    <option value="MEDIUM">Medium</option>
                                    <option value="HARD">Hard</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="pdfMarks">Marks *</label>
                                <input type="number" id="pdfMarks" required min="1" max="100" placeholder="15">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="customPrompt">Custom Instructions (Optional)</label>
                            <input type="text" id="customPrompt"
                                placeholder="e.g. Focus on the definitions on page 3...">
                        </div>

                        <button type="submit" class="btn-primary" id="pdfGenerateBtn">
                            <span class="btn-text">Generate from Context</span>
                            <span class="loader" style="display: none;"></span>
                        </button>
                    </form>
                </div>

                <!-- Manual Mode Form -->
                <div id="manualMode" class="tab-content">
                    <form id="manualForm">
                        <div class="form-row">
                            <div class="form-group" style="flex: 1;">
                                <label for="mSubject">Subject *</label>
                                <select id="mSubject" required>
                                    <option value="">Loading subjects...</option>
                                </select>
                            </div>
                            <div class="form-group" style="flex: 1;">
                                <label for="mTopic">Topic *</label>
                                <select id="mTopic" required disabled>
                                    <option value="">Select a subject first</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="mBloomLevel">Bloom's Level *</label>
                                <select id="mBloomLevel" required>
                                    <option value="">Select Level</option>
                                    <option value="RBT1">RBT1 - Remember</option>
                                    <option value="RBT2">RBT2 - Understand</option>
                                    <option value="RBT3">RBT3 - Apply</option>
                                    <option value="RBT4">RBT4 - Analyze</option>
                                    <option value="RBT5">RBT5 - Evaluate</option>
                                    <option value="RBT6">RBT6 - Create</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="mDifficulty">Difficulty *</label>
                                <select id="mDifficulty" required>
                                    <option value="">Select Difficulty</option>
                                    <option value="EASY">Easy</option>
                                    <option value="MEDIUM">Medium</option>
                                    <option value="HARD">Hard</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="mMarks">Marks *</label>
                                <input type="number" id="mMarks" required min="1" max="100" placeholder="15">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="mQuestionText">Your Question *</label>
                            <textarea id="mQuestionText" required rows="4"
                                placeholder="Type your full question here (min 10 characters)..."
                                style="width: 100%; padding: 1rem; background: var(--bg); border: 1px solid var(--border); border-radius: 0.5rem; color: var(--text); font-family: inherit; font-size: 1rem;"></textarea>
                        </div>

                        <button type="submit" class="btn-primary" id="manualSaveBtn">
                            <span class="btn-text">Save Manual Question</span>
                            <span class="loader" style="display: none;"></span>
                        </button>
                    </form>
                </div>
            </section>

            <!-- Generated Question Display -->
            <section class="card" id="resultSection" style="display: none;">
                <h2>Question Summary</h2>
                <div class="question-display">
                    <div class="question-metadata">
                        <span class="badge" id="resultBloom"></span>
                        <span class="badge" id="resultDifficulty"></span>
                        <span class="badge" id="resultMarks"></span>
                    </div>
                    <div class="question-text" id="questionText"></div>
                    <div class="question-meta-info">
                        <p><strong>Subject:</strong> <span id="resultSubject"></span></p>
                        <p><strong>Topic:</strong> <span id="resultTopic"></span></p>
                        <p><strong>Question ID:</strong> <span id="resultId"></span></p>
                    </div>
                    <button class="btn-secondary" onclick="copyQuestion()">üìã Copy Question</button>
                </div>
            </section>

            <!-- Error Display -->
            <section class="card error-card" id="errorSection" style="display: none;">
                <h3>‚ö†Ô∏è Error</h3>
                <p id="errorMessage"></p>
            </section>
        </main>

        <footer>
            <p>Powered by Groq LLM ‚Ä¢ <a href="http://localhost:8000/docs" target="_blank">API Docs</a></p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>

</html>